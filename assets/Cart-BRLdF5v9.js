import{Q as b}from"./QImg-CyM34lnF.js";import{Q as T,a as w,b as N,c as _,d}from"./QSeparator-BbDxl8iJ.js";import{J as S,N as V,d as L,n as M,u as O,s as R,q as U,r as Y,f as s,v as i,w as t,y as m,c as p,x as k,F as C,H as q,a as g,A as n,b as e,z as h,g as y}from"./index-CD5ytVcT.js";import{Q as j}from"./QBtnGroup-fS8F-WIr.js";import{Q as z}from"./QPage-Kv5dD0yL.js";function A(){return S(V)}const D=g("h5",{class:"q-mt-none"},"Your Cart",-1),E={class:"text-weight-bold"},G={key:1,class:"text-h6 q-pa-md text-center"},H={key:3,class:"text-right q-mt-md"},J={class:"text-h6"},at=L({__name:"Cart",setup(K){const I=M(),c=O(),{cart:l}=R(c),x=U(()=>c.cartTotal),v=Y(!1),Q=A(),F=a=>{const o=c.menuItems.find(r=>r.menuItemId===a);return o?o.photoUrl:""},B=a=>{const o=l.value[a];c.updateCartItemQuantity(a,o.quantity+1)},P=a=>{const o=l.value[a];o.quantity>1?c.updateCartItemQuantity(a,o.quantity-1):c.removeFromCart(a)},$=async()=>{v.value=!0;try{await c.checkout(),Q.notify({type:"positive",message:"Order placed successfully!"}),I.push("/order-history")}catch{Q.notify({type:"negative",message:"Failed to place order. Please try again."})}finally{v.value=!1}};return(a,o)=>(s(),i(z,{class:"q-pa-md"},{default:t(()=>[D,m(l).length?(s(),i(T,{key:0,bordered:"",separator:""},{default:t(()=>[(s(!0),p(C,null,k(m(l),(r,f)=>(s(),i(N,{key:f,class:"q-py-md"},{default:t(()=>[e(_,{avatar:""},{default:t(()=>[e(b,{src:F(r.menuItemId),style:{width:"100px",height:"100px"}},null,8,["src"])]),_:2},1024),e(_,null,{default:t(()=>[e(d,null,{default:t(()=>[y(n(r.name),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[y(" Base Price: $"+n(r.price.toFixed(2)),1)]),_:2},1024),(s(!0),p(C,null,k(r.selectedOptions,u=>(s(),i(d,{key:u.category,caption:""},{default:t(()=>[y(n(u.category)+": "+n(u.option)+" (+$"+n(u.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),e(d,{caption:""},{default:t(()=>[y(" Total Price: $"+n(r.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[g("div",E," Quantity: "+n(r.quantity),1),e(j,{spread:""},{default:t(()=>[e(h,{color:"negative",icon:"remove",onClick:u=>P(f)},null,8,["onClick"]),e(h,{color:"positive",icon:"add",onClick:u=>B(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(s(),p("div",G,"Your cart is empty")),m(l).length?(s(),i(w,{key:2})):q("",!0),m(l).length?(s(),p("div",H,[g("div",J,"Total: $"+n(Math.ceil(x.value).toFixed(2)),1),e(h,{color:"primary",label:"Checkout",onClick:$,class:"q-mt-sm"})])):q("",!0)]),_:1}))}});export{at as default};
