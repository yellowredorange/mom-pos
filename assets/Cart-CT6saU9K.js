import{Q as g}from"./QImg-B59rC6X5.js";import{Q as T,a as N,b as v,c as p}from"./QList-tBxcVsNq.js";import{d as O,n as U,u as V,s as L,q as z,r as M,f as a,v as l,w as e,y,c as f,x as q,F as x,P as b,O as w,b as t,z as _,a as k,B as r,g as h,p as R,i as j,_ as A}from"./index-Ba_CxyyA.js";import{Q as D}from"./QBtnGroup-IjJnybai.js";import{Q as E}from"./QPage-3eVBQiDJ.js";import{u as G}from"./use-quasar-6Ezd9ZTP.js";const Y=d=>(R("data-v-1744f0fc"),d=d(),j(),d),H={class:"normal-font q-mb-sm"},J={key:1,class:"text-h6 q-pa-md text-center text-color text-color-primary"},K={key:3,class:"row justify-between items-center q-mt-md"},W={class:"row no-wrap items-center"},X=Y(()=>k("div",{class:"q-mr-sm text-base"},"Checkout",-1)),Z={class:"q-ml-sm text-base"},ee=O({__name:"Cart",setup(d){const I=U(),c=V(),{cart:n}=L(c),F=z(()=>c.cartTotal),Q=M(!1),m=G(),S=o=>{const u=n.value[o];c.updateCartItemQuantity(o,u.quantity+1)},B=o=>{const u=n.value[o];u.quantity>1?c.updateCartItemQuantity(o,u.quantity-1):c.removeFromCart(o)},$=()=>{m.dialog({title:"Confirm",message:"Are you sure you want to clear your cart?",cancel:!0,persistent:!0}).onOk(()=>{c.clearCart(),m.notify({color:"secondary",message:"Cart cleared successfully"})})},P=async()=>{Q.value=!0;try{await c.checkout(),m.notify({color:"secondary",message:"Order placed successfully!",position:"bottom",timeout:2e3}),I.push("/order-history")}catch{m.notify({color:"accent",message:"Failed to place order. Please try again."})}finally{Q.value=!1}};return(o,u)=>(a(),l(E,{class:"q-pa-md"},{default:e(()=>[y(n).length?(a(),l(T,{key:0,bordered:"",separator:"",class:"rounded-borders"},{default:e(()=>[(a(!0),f(x,null,q(y(n),(s,C)=>(a(),l(N,{key:C,class:"q-py-md"},{default:e(()=>[t(v,{avatar:""},{default:e(()=>[s.photoUrl&&s.photoUrl!==""?(a(),l(g,{key:0,src:s.photoUrl,style:{width:"100px",height:"100px"},ratio:1,class:"rounded-borders"},null,8,["src"])):(a(),l(g,{key:1}))]),_:2},1024),t(v,null,{default:e(()=>[t(p,{class:"item-name"},{default:e(()=>[h(r(s.name),1)]),_:2},1024),t(p,{caption:""},{default:e(()=>[h(" Unit: $"+r(s.price.toFixed(2)),1)]),_:2},1024),(a(!0),f(x,null,q(s.selectedOptions,i=>(a(),l(p,{key:i.category,caption:""},{default:e(()=>[h(r(i.category)+": "+r(i.option)+" (+$"+r(i.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),t(p,{caption:""},{default:e(()=>[h(" Total: $"+r(s.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:e(()=>[k("div",H," Quantity: "+r(s.quantity),1),t(D,{spread:""},{default:e(()=>[t(_,{flat:"",color:"secondary",icon:"remove",onClick:i=>B(C)},null,8,["onClick"]),t(_,{flat:"",color:"primary",icon:"add",onClick:i=>S(C)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),f("div",J,"Your cart is empty")),y(n).length?(a(),l(b,{key:2,class:"q-my-md"})):w("",!0),y(n).length?(a(),f("div",K,[t(_,{outline:"",style:{"font-size":"0.9rem"},color:"secondary",label:"Clear Cart",onClick:$}),t(_,{color:"primary",onClick:P},{default:e(()=>[k("div",W,[X,t(b,{vertical:"",inset:"",color:"white"}),k("div",Z,"$"+r(Math.ceil(F.value).toFixed(2)),1)])]),_:1})])):w("",!0)]),_:1}))}}),le=A(ee,[["__scopeId","data-v-1744f0fc"]]);export{le as default};
