import{Q}from"./QImg-Btx4g6s2.js";import{Q as P,a as T,b as v,c as p}from"./QList-B_kZ0zK7.js";import{d as U,t as V,u as L,v as R,c as O,r as j,U as z,i as a,y as l,w as e,A as y,b as f,z as q,F as b,V as w,R as x,f as t,B as _,e as k,D as s,j as h,p as A,k as D,_ as G}from"./index-DTq4zKhY.js";import{Q as M}from"./QBtnGroup-D_Fq2c-t.js";import{Q as Y}from"./QPage-DLCvkXW9.js";const E=""+new URL("PepeBugFly-fXrYNeKG.png",import.meta.url).href,K=d=>(A("data-v-3896e1aa"),d=d(),D(),d),X={class:"normal-font q-mb-sm"},H={key:1,class:"text-h6 q-pa-md text-center text-color text-color-primary"},J={key:3,class:"row justify-between items-center q-mt-md"},W={class:"row no-wrap items-center"},Z=K(()=>k("div",{class:"q-mr-sm text-base"},"Checkout",-1)),ee={class:"q-ml-sm text-base"},te=U({__name:"Cart",setup(d){const I=V(),r=L(),{cart:n}=R(r),F=O(()=>r.cartTotal),g=j(!1),m=z(),B=o=>{const u=n.value[o];r.updateCartItemQuantity(o,u.quantity+1)},S=o=>{const u=n.value[o];u.quantity>1?r.updateCartItemQuantity(o,u.quantity-1):r.removeFromCart(o)},$=()=>{m.dialog({title:"Confirm",message:"Are you sure you want to clear your cart?",cancel:!0,persistent:!0}).onOk(()=>{r.clearCart(),m.notify({color:"secondary",message:"Cart cleared successfully"})})},N=async()=>{g.value=!0;try{await r.checkout(),m.notify({color:"secondary",message:"Order placed successfully!",position:"bottom",timeout:2e3}),I.push("/order-history")}catch{m.notify({color:"accent",message:"Failed to place order. Please try again."})}finally{g.value=!1}};return(o,u)=>(a(),l(Y,{class:"q-pa-md"},{default:e(()=>[y(n).length?(a(),l(P,{key:0,bordered:"",separator:"",class:"rounded-borders"},{default:e(()=>[(a(!0),f(b,null,q(y(n),(c,C)=>(a(),l(T,{key:C,class:"q-py-md"},{default:e(()=>[t(v,{avatar:""},{default:e(()=>[c.photoUrl?(a(),l(Q,{key:0,src:c.photoUrl,style:{width:"100px",height:"100px"},ratio:1,class:"rounded-borders"},null,8,["src"])):(a(),l(Q,{key:1,src:E}))]),_:2},1024),t(v,null,{default:e(()=>[t(p,{class:"item-name"},{default:e(()=>[h(s(c.name),1)]),_:2},1024),t(p,{caption:""},{default:e(()=>[h(" Unit: $"+s(c.price.toFixed(2)),1)]),_:2},1024),(a(!0),f(b,null,q(c.selectedOptions,i=>(a(),l(p,{key:i.category,caption:""},{default:e(()=>[h(s(i.category)+": "+s(i.option)+" (+$"+s(i.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),t(p,{caption:""},{default:e(()=>[h(" Total: $"+s(c.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:e(()=>[k("div",X," Quantity: "+s(c.quantity),1),t(M,{spread:""},{default:e(()=>[t(_,{flat:"",color:"secondary",icon:"remove",onClick:i=>S(C)},null,8,["onClick"]),t(_,{flat:"",color:"primary",icon:"add",onClick:i=>B(C)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),f("div",H,"Your cart is empty")),y(n).length?(a(),l(w,{key:2,class:"q-my-md"})):x("",!0),y(n).length?(a(),f("div",J,[t(_,{outline:"",style:{"font-size":"0.9rem"},color:"secondary",label:"Clear Cart",onClick:$}),t(_,{color:"primary",onClick:N},{default:e(()=>[k("div",W,[Z,t(w,{vertical:"",inset:"",color:"white"}),k("div",ee,"$"+s(Math.ceil(F.value).toFixed(2)),1)])]),_:1})])):x("",!0)]),_:1}))}}),le=G(te,[["__scopeId","data-v-3896e1aa"]]);export{le as default};
