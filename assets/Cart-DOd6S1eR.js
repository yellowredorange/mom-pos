import{Q as b}from"./QImg-B-imhTN6.js";import{Q as T,a as w,b as N,c as _,d}from"./QSeparator-VRmMa_uL.js";import{O as S,U as V,d as L,m as M,n as O,s as U,q as R,r as Y,f as s,t as i,w as t,x as m,c as p,v as k,F as C,N as q,a as g,z as n,b as e,y as h,g as y}from"./index-BQzI9_lJ.js";import{Q as j}from"./QBtnGroup-DRRC_c3i.js";import{Q as z}from"./QPage-DrVuV0ws.js";function D(){return S(V)}const E=g("h5",{class:"q-mt-none"},"Your Cart",-1),G={class:"text-weight-bold"},K={key:1,class:"text-h6 q-pa-md text-center"},A={key:3,class:"text-right q-mt-md"},H={class:"text-h6"},at=L({__name:"Cart",setup(J){const I=M(),c=O(),{cart:l}=U(c),x=R(()=>c.cartTotal),v=Y(!1),Q=D(),F=a=>{const o=c.menuItems.find(r=>r.menuItemId===a);return o?o.photoUrl:""},B=a=>{const o=l.value[a];c.updateCartItemQuantity(a,o.quantity+1)},P=a=>{const o=l.value[a];o.quantity>1?c.updateCartItemQuantity(a,o.quantity-1):c.removeFromCart(a)},$=async()=>{v.value=!0;try{await c.checkout(),Q.notify({type:"positive",message:"Order placed successfully!"}),I.push("/order-history")}catch{Q.notify({type:"negative",message:"Failed to place order. Please try again."})}finally{v.value=!1}};return(a,o)=>(s(),i(z,{class:"q-pa-md"},{default:t(()=>[E,m(l).length?(s(),i(T,{key:0,bordered:"",separator:""},{default:t(()=>[(s(!0),p(C,null,k(m(l),(r,f)=>(s(),i(N,{key:f,class:"q-py-md"},{default:t(()=>[e(_,{avatar:""},{default:t(()=>[e(b,{src:F(r.menuItemId),style:{width:"100px",height:"100px"}},null,8,["src"])]),_:2},1024),e(_,null,{default:t(()=>[e(d,null,{default:t(()=>[y(n(r.name),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[y(" Base Price: $"+n(r.price.toFixed(2)),1)]),_:2},1024),(s(!0),p(C,null,k(r.selectedOptions,u=>(s(),i(d,{key:u.category,caption:""},{default:t(()=>[y(n(u.category)+": "+n(u.option)+" (+$"+n(u.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),e(d,{caption:""},{default:t(()=>[y(" Total Price: $"+n(r.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[g("div",G," Quantity: "+n(r.quantity),1),e(j,{spread:""},{default:t(()=>[e(h,{color:"negative",icon:"remove",onClick:u=>P(f)},null,8,["onClick"]),e(h,{color:"positive",icon:"add",onClick:u=>B(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(s(),p("div",K,"Your cart is empty")),m(l).length?(s(),i(w,{key:2})):q("",!0),m(l).length?(s(),p("div",A,[g("div",H,"Total: $"+n(Math.ceil(x.value).toFixed(2)),1),e(h,{color:"primary",label:"Checkout",onClick:$,class:"q-mt-sm"})])):q("",!0)]),_:1}))}});export{at as default};
