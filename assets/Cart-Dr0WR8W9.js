import{Q as g}from"./QImg-BbtqDWKZ.js";import{Q as T,a as q,b as P,c as v,d as p}from"./QSeparator-DhmFwzYW.js";import{J as U,N as V,d as L,n as O,u as j,s as z,q as M,r as R,f as a,v as l,w as e,y,c as f,x,F as b,I as w,b as t,z as _,a as k,B as r,g as h,p as A,i as D,_ as E}from"./index-BLlaJK7K.js";import{Q as G}from"./QBtnGroup-Cint9LlS.js";import{Q as J}from"./QPage-BJdCWhEq.js";function K(){return U(V)}const Y=d=>(A("data-v-a6c86c11"),d=d(),D(),d),H={class:"normal-font q-mb-sm"},W={key:1,class:"text-h6 q-pa-md text-center text-color text-color-primary"},X={key:3,class:"row justify-between items-center q-mt-md"},Z={class:"row no-wrap items-center"},ee=Y(()=>k("div",{class:"q-mr-sm text-base"},"Checkout",-1)),te={class:"q-ml-sm text-base"},ae=L({__name:"Cart",setup(d){const I=O(),c=j(),{cart:n}=z(c),F=M(()=>c.cartTotal),Q=R(!1),m=K(),S=o=>{const u=n.value[o];c.updateCartItemQuantity(o,u.quantity+1)},B=o=>{const u=n.value[o];u.quantity>1?c.updateCartItemQuantity(o,u.quantity-1):c.removeFromCart(o)},$=()=>{m.dialog({title:"Confirm",message:"Are you sure you want to clear your cart?",cancel:!0,persistent:!0}).onOk(()=>{c.clearCart(),m.notify({color:"secondary",message:"Cart cleared successfully"})})},N=async()=>{Q.value=!0;try{await c.checkout(),m.notify({color:"secondary",message:"Order placed successfully!",position:"top",timeout:2e3}),I.push("/order-history")}catch{m.notify({color:"accent",message:"Failed to place order. Please try again."})}finally{Q.value=!1}};return(o,u)=>(a(),l(J,{class:"q-pa-md"},{default:e(()=>[y(n).length?(a(),l(T,{key:0,bordered:"",separator:"",class:"rounded-borders"},{default:e(()=>[(a(!0),f(b,null,x(y(n),(s,C)=>(a(),l(P,{key:C,class:"q-py-md"},{default:e(()=>[t(v,{avatar:""},{default:e(()=>[s.photoUrl&&s.photoUrl!==""?(a(),l(g,{key:0,src:s.photoUrl,style:{width:"100px",height:"100px"},ratio:1,class:"rounded-borders"},null,8,["src"])):(a(),l(g,{key:1}))]),_:2},1024),t(v,null,{default:e(()=>[t(p,{class:"item-name"},{default:e(()=>[h(r(s.name),1)]),_:2},1024),t(p,{caption:""},{default:e(()=>[h(" Unit: $"+r(s.price.toFixed(2)),1)]),_:2},1024),(a(!0),f(b,null,x(s.selectedOptions,i=>(a(),l(p,{key:i.category,caption:""},{default:e(()=>[h(r(i.category)+": "+r(i.option)+" (+$"+r(i.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),t(p,{caption:""},{default:e(()=>[h(" Total: $"+r(s.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:e(()=>[k("div",H," Quantity: "+r(s.quantity),1),t(G,{spread:""},{default:e(()=>[t(_,{flat:"",color:"secondary",icon:"remove",onClick:i=>B(C)},null,8,["onClick"]),t(_,{flat:"",color:"primary",icon:"add",onClick:i=>S(C)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),f("div",W,"Your cart is empty")),y(n).length?(a(),l(q,{key:2,class:"q-my-md"})):w("",!0),y(n).length?(a(),f("div",X,[t(_,{outline:"",style:{"font-size":"0.9rem"},color:"secondary",label:"Clear Cart",onClick:$}),t(_,{color:"primary",onClick:N},{default:e(()=>[k("div",Z,[ee,t(q,{vertical:"",inset:"",color:"white"}),k("div",te,"$"+r(Math.ceil(F.value).toFixed(2)),1)])]),_:1})])):w("",!0)]),_:1}))}}),ne=E(ae,[["__scopeId","data-v-a6c86c11"]]);export{ne as default};
