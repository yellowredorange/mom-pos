import{Q}from"./QImg-DUaWtsC8.js";import{Q as T,a as V,b as v,c as p}from"./QList-w2rkGZnS.js";import{d as N,t as U,u as L,v as O,c as R,r as j,U as z,i as a,y as l,w as e,A as y,b as f,z as q,F as b,V as x,R as w,f as t,B as _,e as k,D as o,j as h,p as A,k as D,_ as M}from"./index-BQPjhWqe.js";import{Q as E}from"./QBtnGroup-BH_c7EoZ.js";import{Q as G}from"./QPage-BROlZodE.js";const Y=d=>(A("data-v-56031112"),d=d(),D(),d),H={class:"normal-font q-mb-sm"},J={key:1,class:"text-h6 q-pa-md text-center text-color text-color-primary"},K={key:3,class:"row justify-between items-center q-mt-md"},W={class:"row no-wrap items-center"},X=Y(()=>k("div",{class:"q-mr-sm text-base"},"Checkout",-1)),Z={class:"q-ml-sm text-base"},ee=N({__name:"Cart",setup(d){const I=U(),r=L(),{cart:n}=O(r),F=R(()=>r.cartTotal),g=j(!1),m=z(),B=s=>{const u=n.value[s];r.updateCartItemQuantity(s,u.quantity+1)},S=s=>{const u=n.value[s];u.quantity>1?r.updateCartItemQuantity(s,u.quantity-1):r.removeFromCart(s)},$=()=>{m.dialog({title:"Confirm",message:"Are you sure you want to clear your cart?",cancel:!0,persistent:!0}).onOk(()=>{r.clearCart(),m.notify({color:"secondary",message:"Cart cleared successfully"})})},P=async()=>{g.value=!0;try{await r.checkout(),m.notify({color:"secondary",message:"Order placed successfully!",position:"bottom",timeout:2e3}),I.push("/order-history")}catch{m.notify({color:"accent",message:"Failed to place order. Please try again."})}finally{g.value=!1}};return(s,u)=>(a(),l(G,{class:"q-pa-md"},{default:e(()=>[y(n).length?(a(),l(T,{key:0,bordered:"",separator:"",class:"rounded-borders"},{default:e(()=>[(a(!0),f(b,null,q(y(n),(c,C)=>(a(),l(V,{key:C,class:"q-py-md"},{default:e(()=>[t(v,{avatar:""},{default:e(()=>[c.photoUrl?(a(),l(Q,{key:0,src:c.photoUrl,style:{width:"100px",height:"100px"},ratio:1,class:"rounded-borders"},null,8,["src"])):(a(),l(Q,{key:1,src:"src/assets/PepeBugFly.png"}))]),_:2},1024),t(v,null,{default:e(()=>[t(p,{class:"item-name"},{default:e(()=>[h(o(c.name),1)]),_:2},1024),t(p,{caption:""},{default:e(()=>[h(" Unit: $"+o(c.price.toFixed(2)),1)]),_:2},1024),(a(!0),f(b,null,q(c.selectedOptions,i=>(a(),l(p,{key:i.category,caption:""},{default:e(()=>[h(o(i.category)+": "+o(i.option)+" (+$"+o(i.additionalPrice.toFixed(2))+") ",1)]),_:2},1024))),128)),t(p,{caption:""},{default:e(()=>[h(" Total: $"+o(c.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:e(()=>[k("div",H," Quantity: "+o(c.quantity),1),t(E,{spread:""},{default:e(()=>[t(_,{flat:"",color:"secondary",icon:"remove",onClick:i=>S(C)},null,8,["onClick"]),t(_,{flat:"",color:"primary",icon:"add",onClick:i=>B(C)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),f("div",J,"Your cart is empty")),y(n).length?(a(),l(x,{key:2,class:"q-my-md"})):w("",!0),y(n).length?(a(),f("div",K,[t(_,{outline:"",style:{"font-size":"0.9rem"},color:"secondary",label:"Clear Cart",onClick:$}),t(_,{color:"primary",onClick:P},{default:e(()=>[k("div",W,[X,t(x,{vertical:"",inset:"",color:"white"}),k("div",Z,"$"+o(Math.ceil(F.value).toFixed(2)),1)])]),_:1})])):w("",!0)]),_:1}))}}),ce=M(ee,[["__scopeId","data-v-56031112"]]);export{ce as default};
