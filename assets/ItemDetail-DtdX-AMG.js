import{h as o,p as z,H as D,I as R,J as A,K as F,L as G,M as V,N as E,c as b,T as U,O as H,d as J,R as K,y as Y,a as W,s as X,r as O,o as Z,k as c,f as i,j as w,w as C,g as y,t as _,l as n,D as g,i as u,B as Q,F as L,A as P,S as ee,G as te,m as ae}from"./index-6v_cMgFu.js";import{Q as se}from"./QBtnGroup-WTiyAqDy.js";import{Q as le}from"./QPageSticky-DH5yKM0b.js";import{Q as ne}from"./QPage-o1k6HZV2.js";import{_ as oe}from"./DefaultItemImage-BIn4Nqv8.js";const re=[o("g",{transform:"translate(-20,-20)"},[o("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[o("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),o("g",{transform:"translate(20,20) rotate(15 50 50)"},[o("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[o("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])],ie=z({name:"QSpinnerGears",props:D,setup(s){const{cSize:f,classes:h}=R(s);return()=>o("svg",{class:h.value,width:f.value,height:f.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},re)}}),ce=z({name:"QInnerLoading",props:{...A,...F,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(s,{slots:f}){const h=G(),d=V(s,h.proxy.$q),{transitionProps:e,transitionStyle:x}=E(s),m=b(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(d.value===!0?" q-inner-loading--dark":"")),v=b(()=>"q-inner-loading__label"+(s.labelClass!==void 0?` ${s.labelClass}`:""));function S(){const I=[o(H,{size:s.size,color:s.color})];return s.label!==void 0&&I.push(o("div",{class:v.value,style:s.labelStyle},[s.label])),I}function k(){return s.showing===!0?o("div",{class:m.value,style:x.value},f.default!==void 0?f.default():S()):null}return()=>o(U,e.value,k)}}),ue={class:"column items-center",style:{width:"100%","max-width":"600px"}},de={class:"full-width flex justify-center q-mb-md"},me={class:"text-h5 q-mt-md text-center"},ve={class:"text-h6 q-mt-sm text-center"},pe={class:"q-mt-md"},fe={key:0,class:"q-mt-md full-width"},he={class:"text-h6 text-center",style:{"margin-bottom":"0.6rem"}},ge={class:"row justify-center q-gutter-sm"},Ce={class:"text-h6 q-mt-md text-center"},ye={key:1},_e={key:2},Se=J({__name:"ItemDetail",setup(s){const f=K(),h=Y(),d=W(),{currentMenuItem:e,error:x}=X(d),m=O(1),v=O({}),S=b(()=>d.cartItemCount),k=b(()=>!e.value||!e.value.menuItemOptions?{}:e.value.menuItemOptions.reduce((a,t)=>(a[t.optionCategory]||(a[t.optionCategory]=[]),a[t.optionCategory].push({label:t.option,value:t.option,additionalPrice:t.additionalPrice}),a),{}));Z(async()=>{const a=parseInt(f.params.id);d.menuConfigurations.length===0&&await d.fetchAllMenus(),d.setCurrentMenuItem(a),e.value&&e.value.menuItemOptions&&e.value.menuItemOptions.forEach(t=>{if(!v.value[t.optionCategory]){const p=k.value[t.optionCategory][0];v.value[t.optionCategory]=p.value}})});const I=(a,t)=>{v.value[a]=t},M=()=>{m.value++},B=()=>{m.value>1&&m.value--},T=()=>{if(e.value){const a=Object.entries(v.value).map(([t,p])=>{const r=e.value.menuItemOptions.find(l=>l.optionCategory===t&&l.option===p);return{category:t,option:p,additionalPrice:r?r.additionalPrice:0}});d.addToCart(e.value,m.value,a),h.push("/menu")}},N=()=>{h.push("/cart")},$=()=>{h.push("/menu")},j=b(()=>{let a=e.value?e.value.price:0;return Object.entries(v.value).forEach(([t,p])=>{var l;const r=(l=e.value)==null?void 0:l.menuItemOptions.find(q=>q.optionCategory===t&&q.option===p);r&&(a+=r.additionalPrice)}),a*m.value});return(a,t)=>c(e)?(i(),w(ne,{key:0,class:"q-pa-md flex flex-center"},{default:C(()=>[n(g,{icon:"arrow_back",flat:"",round:"",dense:"",class:"absolute-top-left q-ma-md",onClick:$,style:{"z-index":"999"}}),u("div",ue,[u("div",de,[c(e).photoUrl&&c(e).photoUrl!==""?(i(),w(Q,{key:0,src:c(e).photoUrl,ratio:1,fit:"cover",style:{width:"50vh",height:"50vh"},"spinner-color":"primary"},null,8,["src"])):(i(),w(Q,{key:1,src:oe,ratio:1,fit:"cover",style:{width:"50vh",height:"20vh"},"spinner-color":"primary"}))]),u("div",me,[u("strong",null,_(c(e).name),1)]),u("div",ve,"$"+_(j.value.toFixed(2)),1),u("div",pe,[n(se,null,{default:C(()=>[n(g,{icon:"remove",onClick:B}),n(g,{style:{"font-size":"1.25rem"},label:m.value},null,8,["label"]),n(g,{icon:"add",onClick:M})]),_:1})]),c(e).menuItemOptions?(i(),y("div",fe,[(i(!0),y(L,null,P(k.value,(p,r)=>(i(),y("div",{key:r,class:"q-mb-sm"},[u("div",he,_(r)+":",1),u("div",ge,[(i(!0),y(L,null,P(p,l=>(i(),w(g,{key:l.value,label:`${l.label} +$${l.additionalPrice.toFixed(2)}`,color:v.value[r]===l.value?"primary":"grey-6","text-color":"white",onClick:q=>I(r,l.value),class:"col-auto"},null,8,["label","color","onClick"]))),128))])]))),128))])):ee("",!0),n(g,{color:"primary",class:"q-mt-md q-px-xl",label:a.$t("add-to-cart"),onClick:T,style:{"font-size":"1.1rem"}},null,8,["label"]),u("div",Ce,_(c(e).description),1)]),n(le,{position:"bottom-right",offset:[18,40]},{default:C(()=>[n(g,{fab:"",icon:"shopping_cart",color:"primary",onClick:N},{default:C(()=>[n(te,{color:"red",floating:""},{default:C(()=>[ae(_(S.value),1)]),_:1})]),_:1})]),_:1})]),_:1})):c(x)?(i(),y("div",ye,_(c(x)),1)):(i(),y("div",_e,[n(ce,{showing:""},{default:C(()=>[n(ie,{size:"50px",color:"primary"})]),_:1})]))}});export{Se as default};
