import{a as F,b as z,d as Q,c as $,Q as M}from"./QSeparator-BbDxl8iJ.js";import{Q as ce,a as fe}from"./QCard-CE3soYg2.js";import{j as W,U as X,h as g,T as ge,P as me,r as q,o as E,V,t as C,q as _,W as ve,D as Z,X as U,Y as he,Z as J,$ as be,a0 as xe,M as Se,a1 as R,a2 as _e,d as Ie,u as ye,f as w,v as A,w as S,b as T,c as B,x as Y,F as G,a as Te,g as P,A as H,H as pe}from"./index-CD5ytVcT.js";import{u as Le,a as ke,Q as we}from"./QPage-Kv5dD0yL.js";const qe=W({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:d,emit:c}){let r=!1,v,u,l=null,o=null,i,s;function f(){v&&v(),v=null,r=!1,l!==null&&(clearTimeout(l),l=null),o!==null&&(clearTimeout(o),o=null),u!==void 0&&u.removeEventListener("transitionend",i),i=null}function h(a,m,x){m!==void 0&&(a.style.height=`${m}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,v=x}function b(a,m){a.style.overflowY=null,a.style.height=null,a.style.transition=null,f(),m!==s&&c(m)}function k(a,m){let x=0;u=a,r===!0?(f(),x=a.offsetHeight===a.scrollHeight?0:void 0):(s="hide",a.style.overflowY="hidden"),h(a,x,m),l=setTimeout(()=>{l=null,a.style.height=`${a.scrollHeight}px`,i=t=>{o=null,(Object(t)!==t||t.target===a)&&b(a,"show")},a.addEventListener("transitionend",i),o=setTimeout(i,e.duration*1.1)},100)}function p(a,m){let x;u=a,r===!0?f():(s="show",a.style.overflowY="hidden",x=a.scrollHeight),h(a,x,m),l=setTimeout(()=>{l=null,a.style.height=0,i=t=>{o=null,(Object(t)!==t||t.target===a)&&b(a,"hide")},a.addEventListener("transitionend",i),o=setTimeout(i,e.duration*1.1)},100)}return X(()=>{r===!0&&f()}),()=>g(ge,{css:!1,appear:e.appear,onEnter:k,onLeave:p},d.default)}});function Ce(e){return e??null}function K(e,d){return e??(d===!0?`f_${V()}`:null)}function He({getValue:e,required:d=!0}={}){if(me.value===!0){const c=e!==void 0?q(Ce(e())):q(null);return d===!0&&c.value===null&&E(()=>{c.value=`f_${V()}`}),e!==void 0&&C(e,r=>{c.value=K(r,d)}),c}return e!==void 0?_(()=>K(e(),d)):q(`f_${V()}`)}const $e={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Oe=["beforeShow","show","beforeHide","hide"];function Qe({showing:e,canShow:d,hideOnRouteChange:c,handleShow:r,handleHide:v,processOnMount:u}){const l=Z(),{props:o,emit:i,proxy:s}=l;let f;function h(t){e.value===!0?p(t):b(t)}function b(t){if(o.disable===!0||t!==void 0&&t.qAnchorHandled===!0||d!==void 0&&d(t)!==!0)return;const y=o["onUpdate:modelValue"]!==void 0;y===!0&&(i("update:modelValue",!0),f=t,U(()=>{f===t&&(f=void 0)})),(o.modelValue===null||y===!1)&&k(t)}function k(t){e.value!==!0&&(e.value=!0,i("beforeShow",t),r!==void 0?r(t):i("show",t))}function p(t){if(o.disable===!0)return;const y=o["onUpdate:modelValue"]!==void 0;y===!0&&(i("update:modelValue",!1),f=t,U(()=>{f===t&&(f=void 0)})),(o.modelValue===null||y===!1)&&a(t)}function a(t){e.value!==!1&&(e.value=!1,i("beforeHide",t),v!==void 0?v(t):i("hide",t))}function m(t){o.disable===!0&&t===!0?o["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!1):t===!0!==e.value&&(t===!0?k:a)(f)}C(()=>o.modelValue,m),c!==void 0&&ve(l)===!0&&C(()=>s.$route.fullPath,()=>{c.value===!0&&e.value===!0&&p()}),u===!0&&E(()=>{m(o.modelValue)});const x={show:b,hide:p,toggle:h};return Object.assign(s,x),x}const L=he({}),Ve=Object.keys(J),Ae=W({name:"QExpansionItem",props:{...J,...$e,...Le,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Oe,"click","afterShow","afterHide"],setup(e,{slots:d,emit:c}){const{proxy:{$q:r}}=Z(),v=ke(e,r),u=q(e.modelValue!==null?e.modelValue:e.defaultOpened),l=q(null),o=He(),{show:i,hide:s,toggle:f}=Qe({showing:u});let h,b;const k=_(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),p=_(()=>e.contentInsetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),a=_(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),m=_(()=>{const n={};return Ve.forEach(I=>{n[I]=e[I]}),n}),x=_(()=>a.value===!0||e.expandIconToggle!==!0),t=_(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),y=_(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),ee=_(()=>({expanded:u.value===!0,detailsId:o.value,toggle:f,show:i,hide:s})),j=_(()=>{const n=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":o.value,"aria-label":n}});C(()=>e.group,n=>{b!==void 0&&b(),n!==void 0&&D()});function te(n){a.value!==!0&&f(n),c("click",n)}function ne(n){n.keyCode===13&&N(n,!0)}function N(n,I){I!==!0&&l.value!==null&&l.value.focus(),f(n),_e(n)}function ae(){c("afterShow")}function oe(){c("afterHide")}function D(){h===void 0&&(h=V()),u.value===!0&&(L[e.group]=h);const n=C(u,O=>{O===!0?L[e.group]=h:L[e.group]===h&&delete L[e.group]}),I=C(()=>L[e.group],(O,de)=>{de===h&&O!==void 0&&O!==h&&s()});b=()=>{n(),I(),L[e.group]===h&&delete L[e.group],b=void 0}}function ie(){const n={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},I=[g(R,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:t.value})];return y.value===!0&&(Object.assign(n,{tabindex:0,...j.value,onClick:N,onKeyup:ne}),I.unshift(g("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),g($,n,()=>I)}function le(){let n;return d.header!==void 0?n=[].concat(d.header(ee.value)):(n=[g($,()=>[g(Q,{lines:e.labelLines},()=>e.label||""),e.caption?g(Q,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&n[e.switchToggleSide===!0?"push":"unshift"](g($,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>g(R,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&n[e.switchToggleSide===!0?"unshift":"push"](ie()),n}function ue(){const n={ref:"item",style:e.headerStyle,class:e.headerClass,dark:v.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return x.value===!0&&(n.clickable=!0,n.onClick=te,Object.assign(n,a.value===!0?m.value:j.value)),g(z,n,le)}function re(){return be(g("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:p.value,id:o.value},Se(d.default)),[[xe,u.value]])}function se(){const n=[ue(),g(qe,{duration:e.duration,onShow:ae,onHide:oe},re)];return e.expandSeparator===!0&&n.push(g(F,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:v.value}),g(F,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:v.value})),n}return e.group!==void 0&&D(),X(()=>{b!==void 0&&b()}),()=>g("div",{class:k.value},[g("div",{class:"q-expansion-item__container relative-position"},se())])}}),Be=Te("h5",{class:"q-mt-none"},"Order History",-1),Pe={key:0,class:"text-grey-8"},Fe=Ie({__name:"OrderHistory",setup(e){const d=ye(),c=q([]);E(async()=>{try{c.value=await d.getAllOrders()}catch(l){console.error("Failed to fetch orders:",l)}});const r=l=>new Date(l).toLocaleString(),v=l=>l.some(o=>o.trim()!==""),u=l=>l.filter(o=>o.trim()!=="").join(", ");return(l,o)=>(w(),A(we,{padding:""},{default:S(()=>[Be,T(M,{bordered:"",separator:""},{default:S(()=>[(w(!0),B(G,null,Y(c.value,i=>(w(),A(Ae,{key:i.orderId,label:`Order #${i.orderId} - ${r(i.orderDate)}`,caption:`Total: $${i.totalAmount.toFixed(2)}`,group:"orders","header-class":"text-primary"},{default:S(()=>[T(ce,null,{default:S(()=>[T(fe,null,{default:S(()=>[T(M,{dense:""},{default:S(()=>[(w(!0),B(G,null,Y(i.orderItems,s=>(w(),A(z,{key:s.orderItemId},{default:S(()=>[T($,null,{default:S(()=>[T(Q,null,{default:S(()=>[P(H(s.quantity)+"x "+H(s.menuItemName)+" ",1),v(s.options)?(w(),B("span",Pe," ("+H(u(s.options))+")",1)):pe("",!0)]),_:2},1024),T(Q,{caption:""},{default:S(()=>[P(" Unit Price: $"+H(s.unitPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024),T($,{side:""},{default:S(()=>[P(" $"+H(s.totalPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["label","caption"]))),128))]),_:1})]),_:1}))}});export{Fe as default};
